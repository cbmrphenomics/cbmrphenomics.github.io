

<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>6.2. Persistent sessions with tmux &#8212; Esrum Cluster  documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/playback.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/js/custom.js"></script>
    <script src="../_static/js/libgif.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.3. Batching commands outside Slurm" href="batching_commands.html" />
    <link rel="prev" title="6.1. Creating environment modules" href="modules.html" />
    <script defer src="../_static/js/playback.js"></script>

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="batching_commands.html" title="6.3. Batching commands outside Slurm"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="modules.html" title="6.1. Creating environment modules"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Esrum Cluster  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">6. </span>Tips and tricks</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.2. Persistent sessions with tmux</a><ul>
<li><a class="reference internal" href="#getting-started">6.2.1. Getting started</a><ul>
<li><a class="reference internal" href="#creating-and-navigating-between-terminals">6.2.1.1. Creating and navigating between terminals</a></li>
<li><a class="reference internal" href="#detaching-from-and-re-attaching-to-your-sessions">6.2.1.2. Detaching from and re-attaching to your sessions</a></li>
<li><a class="reference internal" href="#naming-your-sessions-and-windows">6.2.1.3. Naming your sessions and windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#basic-shortcuts">6.2.2. Basic shortcuts</a></li>
<li><a class="reference internal" href="#additional-resources">6.2.3. Additional resources</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="modules.html"
                        title="previous chapter"><span class="section-number">6.1. </span>Creating environment modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="batching_commands.html"
                        title="next chapter"><span class="section-number">6.3. </span>Batching commands outside Slurm</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="persistent-sessions-with-tmux">
<span id="p-tips-tmux"></span><h1><span class="section-number">6.2. </span>Persistent sessions with tmux<a class="headerlink" href="#persistent-sessions-with-tmux" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to use <a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a> to manage multiple sets of
terminals, to name your terminals to remind yourself what you were
working with, and to leave your terminals running in the background when
you disconnect from the server (whether intentionally or
unintentionally).</p>
<p>Using <a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a> is therefore highly recommended when you are working on the
cluster, since it lets you work uninterrupted over multiple days,
without having to leave your computer running at all time and without
having to worry about your internet connection staying up. Anyone
already using GNU <a class="reference external" href="https://www.gnu.org/software/screen/">screen</a> or one of the other alternatives can of course
keep using those.</p>
<p>The following gives brief introduction to using <a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a>. A more detailed
<a class="reference external" href="https://github.com/tmux/tmux/wiki/Getting-Started">getting started</a> guide can be found in the official <a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a>
documentation.</p>
<div class="section" id="getting-started">
<h2><span class="section-number">6.2.1. </span>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>To get started, <code class="docutils literal notranslate"><span class="pre">cd</span></code> to the directory you wish to work in and run
<code class="docutils literal notranslate"><span class="pre">tmux</span></code> or the longer (but equivalent) command <code class="docutils literal notranslate"><span class="pre">tmux</span> <span class="pre">new</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /projects/my_project/people/abc123
<span class="gp">$</span> tmux
</pre></div>
</div>
<img alt="../_images/tmux_new.gif" class="gif" src="../_images/tmux_new.gif" />
<p>This will start tmux and create a new session (group of terminals) with
a single window (terminal) to begin with, and will make new terminal
start with the current working directory set to
<code class="docutils literal notranslate"><span class="pre">/projects/my_project/people/abc123</span></code>. The benefit of changing your
working directory before starting tmux is that all terminals opened in
that session will start in that directory.</p>
<div class="section" id="creating-and-navigating-between-terminals">
<h3><span class="section-number">6.2.1.1. </span>Creating and navigating between terminals<a class="headerlink" href="#creating-and-navigating-between-terminals" title="Permalink to this headline">¶</a></h3>
<p>You start your new session with a single, blank terminal, but you can
create any number of additional terminals using the <code class="docutils literal notranslate"><span class="pre">Ctrl+b</span> <span class="pre">c</span></code>
keyboard shortcut. To use this shortcut first press <code class="docutils literal notranslate"><span class="pre">Ctrl+b</span></code>, then
release the buttons and press <code class="docutils literal notranslate"><span class="pre">c</span></code> and <em>only</em> <code class="docutils literal notranslate"><span class="pre">c</span></code>. Notice how each
terminal gets listed on the tmux bar.</p>
<p>When you have more than one terminal in a session, you can switch
between them using <code class="docutils literal notranslate"><span class="pre">Ctrl+b</span> <span class="pre">n</span></code> to switch to the next terminal and
<code class="docutils literal notranslate"><span class="pre">Ctrl+b</span> <span class="pre">p</span></code> to switch to the previous terminal.</p>
<p>To close the terminals you've created, use either the <code class="docutils literal notranslate"><span class="pre">exit</span></code> command
or press <code class="docutils literal notranslate"><span class="pre">CTRL+d</span></code> while on an empty line:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span><span class="c1">## either</span>
<span class="gp">$</span> <span class="nb">exit</span>
<span class="gp">#</span><span class="c1">## or</span>
<span class="gp">$</span> &lt;press CTRL+d&gt;
</pre></div>
</div>
<p><a class="reference external" href="https://github.com/tmux/tmux/wiki">tmux</a> will exit with the message <code class="docutils literal notranslate"><span class="pre">[exited]</span></code> once the last terminal in
the current session has been closed.</p>
</div>
<div class="section" id="detaching-from-and-re-attaching-to-your-sessions">
<h3><span class="section-number">6.2.1.2. </span>Detaching from and re-attaching to your sessions<a class="headerlink" href="#detaching-from-and-re-attaching-to-your-sessions" title="Permalink to this headline">¶</a></h3>
<p>Instead of existing your terminal, tmux gives you the option of
&quot;detaching&quot; from the session. This leaves everything running on the
server until you re-attach to the session. You will typically detach
once your jobs are running or simply if you need to leave for the day.</p>
<p>To disconnect from the current session, use the keyboard shortcut
<code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">d</span></code>. This returns you to your regular terminal and you can
safely disconnect from the server:</p>
<p>Once you wish to resume your work, you can use the <code class="docutils literal notranslate"><span class="pre">tmux</span> <span class="pre">attach</span></code>
(command to re-open your running sessions, optionally specifying the
name of the session you wish to open (see also below):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span><span class="c1">## either</span>
<span class="gp">$</span> tmux attach
<span class="gp">#</span><span class="c1">## or</span>
<span class="gp">$</span> tmux attach -t project
</pre></div>
</div>
<p>Alternatively, you can use the keyboard shortcut <code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">s</span></code> to switch
to the correct session after you've attached tmux.</p>
</div>
<div class="section" id="naming-your-sessions-and-windows">
<h3><span class="section-number">6.2.1.3. </span>Naming your sessions and windows<a class="headerlink" href="#naming-your-sessions-and-windows" title="Permalink to this headline">¶</a></h3>
<p>tmux allows you to give custom names to each session (group of
terminals) and each window (terminal), in order to help you
differentiate between them. This is not required, but is is recommended
to do so if you work on multiple things at once.</p>
<p>When starting a new session with the command <code class="docutils literal notranslate"><span class="pre">tmux</span> <span class="pre">new</span></code>, you can also
give the session a name with <code class="docutils literal notranslate"><span class="pre">-s</span></code> and the window can be given a name
with <code class="docutils literal notranslate"><span class="pre">-n</span></code> as follows. However, this can only if you are not already in
an active tmux session:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> tmux new -s project -n task
</pre></div>
</div>
<img alt="../_images/tmux_new_named.gif" class="gif" src="../_images/tmux_new_named.gif" />
<p>To rename an existing tmux session or window, you instead need to use
the <a class="reference internal" href="#basic-shortcuts">basic shortcuts</a> described below.</p>
</div>
</div>
<div class="section" id="basic-shortcuts">
<h2><span class="section-number">6.2.2. </span>Basic shortcuts<a class="headerlink" href="#basic-shortcuts" title="Permalink to this headline">¶</a></h2>
<p>The following lists the basic shortcuts that you need to work with tmux.
Additional shortcuts can be found in the tmux <a class="reference external" href="https://man.openbsd.org/OpenBSD-current/man1/tmux.1#DEFAULT_KEY_BINDINGS">manual page</a> (<code class="docutils literal notranslate"><span class="pre">man</span>
<span class="pre">tmux</span></code>).</p>
<p>Every shortcut listed below is performed by first pressing <code class="docutils literal notranslate"><span class="pre">CTRL+b</span></code>,
releasing those keys, and <em>then</em> pressing the specified button and
<em>only</em> the specified button.</p>
<p><strong>Creating new terminals in a session</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">c</span></code> Creates a new terminal in the current session.</p></li>
</ul>
</div></blockquote>
<p><strong>Switching between sessions and windows</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">n</span></code> Switches to the next window (terminal)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">p</span></code> Switches to the previous window (terminal)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">s</span></code> Switches to a different session (group of terminals)</p></li>
</ul>
</div></blockquote>
<p><strong>Renaming sessions and windows</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">,</span></code> Renames the current window (terminal)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">$</span></code> Renames the current session (group of terminals)</p></li>
</ul>
</div></blockquote>
<p><strong>Detaching from tmux</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">d</span></code> Detaches from the current session (group of
terminals). Tmux keeps running after this along with your
terminals.</p></li>
</ul>
</div></blockquote>
<p><strong>Scrolling in a tmux window</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CTRL+b</span> <span class="pre">PageUp</span></code> Enables scrolling with PageUp/PageDown and arrow
keys. Press ESC to exit scrolling mode. Current line-number is
indicated in yellow in the top right corner.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="additional-resources">
<h2><span class="section-number">6.2.3. </span>Additional resources<a class="headerlink" href="#additional-resources" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="batching_commands.html" title="6.3. Batching commands outside Slurm"
             >next</a></li>
        <li class="right" >
          <a href="modules.html" title="6.1. Creating environment modules"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Esrum Cluster  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">6. </span>Tips and tricks</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, CBMR Phenomics.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>


<!doctype html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Running jobs using Slurm &#8212; Esrum Cluster  documentation</title>
    <link rel="stylesheet" href="../_static/bizstyle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running tasks on the cluster" href="../running_tasks.html" />
    <link rel="prev" title="Welcome to Esrum" href="welcome_to_esrum.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!--[if lt IE 9]>
    <script src="_static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../running_tasks.html" title="Running tasks on the cluster"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="welcome_to_esrum.html" title="Welcome to Esrum"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Esrum Cluster  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Getting started</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Running jobs using Slurm</a><ul>
<li><a class="reference internal" href="#running-an-interactive-shell">Running an interactive shell</a></li>
<li><a class="reference internal" href="#reserving-resources-for-your-jobs">Reserving resources for your jobs</a></li>
<li><a class="reference internal" href="#reserving-gpus">Reserving GPUs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="welcome_to_esrum.html"
                        title="previous chapter">Welcome to Esrum</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../running_tasks.html"
                        title="next chapter">Running tasks on the cluster</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/getting_started/running_jobs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-jobs-using-slurm">
<h1>Running jobs using Slurm<a class="headerlink" href="#running-jobs-using-slurm" title="Permalink to this headline">¶</a></h1>
<p>The Esrum cluster makes use of the <a class="reference external" href="https://slurm.schedmd.com/overview.html">Slurm</a> job management system in order
to queue and distribute jobs on the available nodes. This section
describes how to start an interactive shell on a compute node, how run
basic jobs, and how to reserve the needed resources for your work.</p>
<p>It is strongly recommended that you make use of <a href="#id1"><span class="problematic" id="id2">tmux_</span></a> or a similar tool
when running tasks, in order to ensure that your work is not interrupted
if you lose connection to the server or need to turn off your PC. See
the <a class="reference internal" href="../tips_and_tricks/tmux.html#tmux"><span class="std std-ref">Persistent sessions with tmux</span></a> page for a short tutorial.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Resource intensive jobs <em>must</em> be run using the queuing system. Your
tasks <em>will</em> be terminated without prior warning if you fail to do
so, in order to prevent any impact on other users of the cluster.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Show consideration towards other users of the cluster. If you need to
run very intensive jobs then please contact Phenomics first so that
we can ensure that the cluster will still be usable by other users
while your jobs are running. Failure to do so will result in your
jobs being terminated without prior warning.</p>
</div>
<div class="section" id="running-an-interactive-shell">
<h2>Running an interactive shell<a class="headerlink" href="#running-an-interactive-shell" title="Permalink to this headline">¶</a></h2>
<p>If you need to run analyses in using an interactive process, for example
an R shell, then you can start a remote shell</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">[abc123@esrumhead01fl ~] $</span> srun --pty
<span class="gp">[abc123@esrumcmpn07fl ~] $</span>
</pre></div>
</div>
<p>Note that the hostname displayed changes from <cite>esrumhead01fl</cite> to
<cite>esrumcmpn07fl</cite>, where <cite>esrumcmpn07fl</cite> is one of the eight Esrum compute
nodes.</p>
<p>You can now run interactive jobs, for example running an R shell or
testing computationally expensive tools or scripts. Once you are done,
exit the interactive shell by using the <cite>exit</cite> command or pressing
<cite>Ctrl+D</cite>.</p>
<p>Be sure to exit the interactive session once you are done working, so
that the resources reserved for your shell is made available to other
users.</p>
</div>
<div class="section" id="reserving-resources-for-your-jobs">
<h2>Reserving resources for your jobs<a class="headerlink" href="#reserving-resources-for-your-jobs" title="Permalink to this headline">¶</a></h2>
<p>By default a <cite>srun</cite> will reserve 1 CPU (2 threads) and TODO GB of ram
per CPU. Should your job require more resources, you may request those
using the <cite>-c</cite> or <cite>–cpus-per-task</cite> options, and the</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you</p>
</div>
</div>
<div class="section" id="reserving-gpus">
<h2>Reserving GPUs<a class="headerlink" href="#reserving-gpus" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../running_tasks.html" title="Running tasks on the cluster"
             >next</a> |</li>
        <li class="right" >
          <a href="welcome_to_esrum.html" title="Welcome to Esrum"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Esrum Cluster  documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Getting started</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2023, CBMR Phenomics.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.4.
    </div>
  </body>
</html>